<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="index.css">
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">

  <title>Frontend Mentor | Shortly URL shortening API Challenge</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet ðŸ‘ -->
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
</head>
<style>
* {
   margin: 0;
   padding: 0;
    font-family: 'Poppins', sans-serif;
  }
</style>

<body class="min-h-full">
  <!-- This example requires Tailwind CSS v2.0+ -->
  <nav class="lg:px-10 lg:py-5">
    <div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8">
      <div class="relative flex items-center justify-between h-16">
        <div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start">
          <div class="flex-shrink-0 flex items-center">
            <img class="block h-8 w-auto" src="images/logo.svg" alt="Workflow">
          </div>
          <div class="absolute right-0 flex items-center md:hidden">
            <!-- Mobile menu button-->
            <button type="button"
              class="inline-flex mobile-menu-button items-center justify-center p-2 rounded-md text-gray-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
              aria-controls="mobile-menu" aria-expanded="false">
              <span class="sr-only">Open main menu</span>

              <svg class="block h-6 w-6" id="menu-icon" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
              </svg>

              <svg class="hidden h-6 w-6" id="close-icon" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div class="hidden md:block md:ml-6">
            <div class="flex space-x-4">
              <!-- Links -->
              <a href="#"
                class="text-gray-400 hover:text-gray-900 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Features</a>

              <a href="#"
                class="text-gray-400 hover:text-gray-900 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Pricing</a>

              <a href="#"
                class="text-gray-400 hover:text-gray-900 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Resources</a>
            </div>
          </div>
        </div>
        <div class="absolute inset-y-0 right-0 flex items-center pr-2 md:block hidden ml-6 pt-2">
          <a href="#" class="text-gray-400 px-3 py-2 rounded-md text-sm font-medium" aria-current="page">Login</a>
          <button style="background-color: hsl(180, 66%, 49%);"
            class="p-3 rounded-full text-sm font-bold text-white">Sign Up</button>
        </div>
      </div>
    </div>
    </div>

    <!-- Mobile Menu -->
    <div class="hidden absolute w-full" id="mobile-menu">
      <div style="background-color: hsl(257, 27%, 26%);" class="px-2 pt-2 pb-3 rounded-lg mx-10">
        <div class="py-5">

          <a href="#" class="text-white block px-3 py-2 mb-2 text-center text-base font-medium font-bold">Features</a>

          <a href="#" class="text-white block px-3 py-2 mb-2 text-center text-base font-medium font-bold">Team</a>

          <a href="#" class="text-white block px-3 py-2 mb-2 text-center text-base font-medium font-bold">Resources</a>

          <div style="height: 2px; background-color: #4F4469;" class="my-5 mx-3 w-auto"></div>

          <a href="#" class="text-white block px-3 py-2 mb-2 text-center text-base font-medium font-bold">Login</a>

          <button style="background-color: hsl(180, 66%, 49%);"
            class="p-3 rounded-full text-base font-medium font-bold text-white w-full">Sign Up</button>

        </div>
      </div>
    </div>
  </nav>
  <div class="flex lg:flex-row flex-col-reverse">
    <main class="mt-10 mx-2 sm:ml-20 max-w-7xl px-4 bg-transparent sm:mt-12 sm:pl-6 md:mt-16 lg:mt-20 lg:pl-8 xl:mt-28">
      <div class="sm:text-center lg:text-left">
        <h1 class="md:text-7xl text-5xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl">
          More than just shorter links
        </h1>
        <p class="mt-3 text-sm text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0">
          Build your brand's recognition and get detailed insights on how your links are performing
        </p>
        <div class="mt-5 sm:mt-8 mb-24 sm:flex justify-center md:justify-start">
          <button style="background-color: hsl(180, 66%, 49%);"
            class="p-3 px-5  rounded-full text-base font-medium font-bold text-white">Get Started</button>
        </div>
    </main>
    <div>
      <img class="h-56 w-full object-scale-down overflow-hidden sm:h-72 md:h-96 lg:w-full lg:h-full"
        src="images/illustration-working.svg" alt="">
    </div>
  </div>
  <!-- Form -->

  <!-- List -->

  <div  style="background-color: #F0F1F6;">
    <div
      style="background-color: hsl(257, 27%, 26%); background-image: url('/images/bg-shorten-desktop.svg'); background-repeat: no-repeat; background-size: cover;"
      class="absolute relative bottom-14  flex items-center form h-30 md:h-28 rounded-lg mx-11 px-10">
      <form class="align-center form w-full grid grid-rows-2 mb-0 gap-1 lg:flex lg:row lg:gap-4" novalidate>
        <div class="justify-center lg:w-10/12 flex flex-col">
          <input class="bg-white h-12 w-full md:mt-0 mt-3 input rounded-lg px-7" placeholder="Shorten a link here..." />
        </div>
        <button type="submit" style="background-color: hsl(180, 66%, 49%);"
          class="p-3 rounded-lg text-base h-12 lg:w-2/12 w-full font-medium font-bold text-white">Shorten It!</button>
      </form>
    </div>
    <div class="list px-10 pt-1 mb-24">
    </div>
    <div class="text-center">
      <p class="text-3xl font-extrabold">Advance Statistics</p>
      <p class="text-gray-500 text-base">Track how your links are performing across the web with<br /> advanced
        statistics
        dashboard.</p>
    </div>

    <div class="flex lg:flex-row flex-col w-full items-center gap-10 h-62 pt-16 pb-20">
      <div class="relative ml-12 z-10">
        <div class="w-20 h-20 absolute bottom-auto -top-10 left-10 flex items-center justify-center rounded-full"
          style="background-color: hsl(257, 27%, 26%);">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40">
            <path fill="#2BD0D0"
              d="M36.406 11.719c.648 0 1.172.524 1.172 1.172v24.765h1.25a1.172 1.172 0 110 2.344H1.172a1.172 1.172 0 110-2.344h1.25V24.61c0-.647.524-1.172 1.172-1.172H8.28c.648 0 1.172.525 1.172 1.172v13.047h2.344v-8.36c0-.646.524-1.171 1.172-1.171h4.687c.648 0 1.172.525 1.172 1.172v8.36h2.344V19.921c0-.647.524-1.172 1.172-1.172h4.687c.648 0 1.172.525 1.172 1.172v17.734h2.344V12.891c0-.648.524-1.172 1.172-1.172zm-1.172 2.344h-2.343v23.593h2.343V14.063zm-9.375 7.03h-2.343v16.563h2.343V21.094zm-9.375 9.376h-2.343v7.187h2.343V30.47zM7.11 25.78H4.766v11.875h2.343V25.781zM34.062 0a3.52 3.52 0 013.516 3.516 3.52 3.52 0 01-3.516 3.515c-.72 0-1.389-.217-1.947-.59l-4.073 3.055a3.52 3.52 0 01-3.355 4.567 3.496 3.496 0 01-1.514-.344l-4.689 4.688c.22.459.344.973.344 1.515a3.52 3.52 0 01-3.515 3.515 3.52 3.52 0 01-3.488-3.949l-3.45-1.724a3.503 3.503 0 01-2.438.986 3.52 3.52 0 01-3.515-3.516 3.52 3.52 0 013.515-3.515 3.52 3.52 0 013.488 3.949l3.45 1.725a3.503 3.503 0 013.952-.643l4.689-4.688a3.496 3.496 0 01-.344-1.515 3.52 3.52 0 013.515-3.516c.72 0 1.39.218 1.948.59l4.073-3.054A3.52 3.52 0 0134.063 0zm-18.75 18.75c-.646 0-1.171.526-1.171 1.172 0 .646.525 1.172 1.171 1.172.647 0 1.172-.526 1.172-1.172 0-.646-.525-1.172-1.172-1.172zm-9.374-4.688c-.647 0-1.172.526-1.172 1.172 0 .646.525 1.172 1.171 1.172.647 0 1.172-.526 1.172-1.172 0-.646-.525-1.171-1.171-1.171zm18.75-4.687c-.647 0-1.172.526-1.172 1.172 0 .646.525 1.172 1.172 1.172.646 0 1.171-.526 1.171-1.172 0-.646-.525-1.172-1.172-1.172zm9.375-7.031c-.647 0-1.172.526-1.172 1.172 0 .646.525 1.171 1.172 1.171.646 0 1.171-.525 1.171-1.171s-.525-1.172-1.172-1.172z" />
          </svg>
        </div>
        <div class="bg-white h-auto px-8 h-40 pt-20 pb-6" style="width: 25rem;">
          <p class="text-xl font-extrabold mb-3">Brand Recognition</p>
          <p class="text-gray-500">Boost your brand recognition with each click. Generic links don't mean a thing.
            Branded links help instil confidence in your content</p>
        </div>
      </div>
      <div class="relative lg:ml-0 ml-12 mt-10 lg:mt-16 z-10">
        <div class="w-20 h-20 absolute bottom-auto -top-10 left-10 flex items-center justify-center rounded-full"
          style="background-color: hsl(257, 27%, 26%);">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40">
            <path fill="#2BD0D0"
              d="M19.968 0c11.01 0 19.969 8.958 19.969 19.968s-8.958 19.969-19.969 19.969C8.958 39.937 0 30.979 0 19.968 0 8.958 8.958 0 19.968 0zm7.805 35.579c-4.863-2.402-10.746-2.402-15.609 0a17.339 17.339 0 007.804 1.862 17.34 17.34 0 007.805-1.862zm-6.556-33.02V6.24H18.72V2.56a17.362 17.362 0 00-9.492 3.656l2.798 2.797-1.765 1.765L7.373 7.89a17.41 17.41 0 00-4.678 9.582h4.793v2.497H2.496c0 5.805 2.857 10.943 7.227 14.122 6.217-3.714 14.274-3.714 20.49 0 4.37-3.179 7.228-8.317 7.228-14.123h-4.992v-2.496h4.793a17.41 17.41 0 00-4.678-9.582l-2.888 2.888-1.765-1.765 2.798-2.797a17.362 17.362 0 00-9.492-3.657zm-2.437 8.292c.332-1.034 2.045-1.034 2.377 0 .635 1.978 3.804 11.955 3.804 14.11a4.997 4.997 0 01-4.993 4.992 4.997 4.997 0 01-4.992-4.992c0-2.155 3.17-12.132 3.804-14.11zm1.188 4.567c-1.233 4.047-2.496 8.522-2.496 9.543a2.5 2.5 0 002.496 2.496 2.5 2.5 0 002.497-2.496c0-1.02-1.263-5.496-2.497-9.543z" />
          </svg>
        </div>
        <div class="bg-white h-auto px-8 h-40 pt-20 pb-6" style="width: 25rem;">
          <p class="text-xl font-extrabold mb-3">Detailed Records</p>
          <p class="text-gray-500">Gain insights on who is clicking your links. Knowning when and where people engage with your content helps inform better decisions.</p>
        </div>
      </div>
      <div class="relative lg:mt-32 lg:ml-0 mt-10 ml-12 mr-20 z-10">
        <div class="w-20 h-20 absolute bottom-auto -top-10 left-10 flex items-center justify-center rounded-full"
          style="background-color: hsl(257, 27%, 26%);">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48">
            <path fill="#2BD0D0"
              d="M46.608 6.02a.975.975 0 00-.927-.047l-7.624 3.591a8.283 8.283 0 00-4.728 6.837l-.196 2.436-3.95 6.561v-2.801c0-.01-.006-.017-.006-.027a.974.974 0 00-.046-.284l-1.838-5.514 3.753-7.504a.984.984 0 00-.099-1.03l-5.9-7.867a1.019 1.019 0 00-1.573 0L17.573 8.24a.984.984 0 00-.093 1.03l3.753 7.503-1.838 5.514a.974.974 0 00-.047.284v3.951l-6.127-9.299c-.007-.01-.02-.017-.026-.026a.995.995 0 00-.211-.215c-.02-.013-.036-.03-.056-.042-.02-.013-.022-.02-.035-.027l-3.605-2.085-1.497-2.271L5.628 9.27a.983.983 0 00-1.147-.386L.654 10.227a.983.983 0 00-.491 1.468l2.705 4.107 1.492 2.27.492 4.137a.36.36 0 00.01.04c.004.02.009.041.015.061a.973.973 0 00.116.295c.007.01.007.023.014.033.007.01 14.624 22.165 14.695 22.225A4.87 4.87 0 0024.255 48c.4 0 .8-.05 1.19-.145a4.886 4.886 0 003.028-2.235l13.08-21.698 2.065-1.307a8.343 8.343 0 002.66-2.721 8.259 8.259 0 001.18-4.651l-.383-8.42a.984.984 0 00-.467-.803zm-7.122 17.524l-1.522 2.527-5.054-3.048 1.524-2.527 5.052 3.048zM21.315 38.446V23.58h5.9v5.08l-5.9 9.786zm1.693-20.766h2.515l1.31 3.933h-5.136l1.31-3.933zm1.257-6.885a.983.983 0 110-1.966.983.983 0 010 1.966zm0-8.194l4.75 6.331-3.39 6.78h-.377v-3.13a2.95 2.95 0 10-1.966 0v3.13h-.376l-3.39-6.78 4.75-6.331zM10.53 17.818l-.29.19-3.621 2.387-.333-2.787a.982.982 0 00-.156-.424l-1.081-1.642L6.69 14.46l1.081 1.642a.988.988 0 00.329.31l2.429 1.406zm-6.122-6.826l1.2 1.822-1.642 1.082-1.475-2.232 1.917-.672zm5.249 9.755l2.458-1.624 7.233 10.972v10.726L7.193 22.371l2.464-1.624zm17.135 23.851a2.95 2.95 0 11-5.052-3.048l7.425-12.315h.017v-.027l2.712-4.499 2.527 1.526 2.53 1.52-10.16 16.843zm17.807-25.724a6.353 6.353 0 01-2.028 2.073l-1.747 1.107-2.852-1.717-2.852-1.717.162-2.065a6.318 6.318 0 013.604-5.213L45.18 8.38l.125 2.74a.973.973 0 00-.295.014l-2.382.59a5.986 5.986 0 00-4.425 4.524.983.983 0 001.919.43 4.032 4.032 0 012.977-3.043l2.297-.57.103 2.262a6.304 6.304 0 01-.9 3.548z" />
          </svg>
        </div>
        <div class="bg-white h-auto px-8 h-40 pt-20 pb-6" style="width: 25rem;">
          <p class="text-xl font-extrabold mb-3">Fully customizable</p>
          <p class="text-gray-500">Improve brand awareness and content discoverability through customizable links, supercharging audience engagement.</p>
        </div>
      </div>
      <div class="h-2 bg-black hidden lg:block absolute mt-44 ml-48" style="width: 50rem; background: hsl(180, 66%, 49%);"></div>
      <div class="w-2 block lg:hidden ml-10 bg-black block absolute" style="height: 50rem; background: hsl(180, 66%, 49%);"></div>
    </div>
    <div class="h-48 flex items-center justify-center flex-col" style="background-color: hsl(257, 27%, 26%); background-image: url('/images/bg-boost-desktop.svg'); background-repeat: no-repeat; background-size: cover;">
      <p class="md:text-4xl text-3xl text-white font-bold mb-5">Boost your links today</p>
      <button style="background-color: hsl(180, 66%, 49%);"
            class="p-3 rounded-full px-7 text-sm font-bold text-white">Get Started</button>
    </div>
</body>
<script>
  // Get DOM elements
  const btn = document.querySelector("button.mobile-menu-button");
  const menu = document.querySelector("#mobile-menu");
  const menu_icon = document.querySelector("#menu-icon");
  const close_icon = document.querySelector("#close-icon");
  const input = document.querySelector(".input");
  const form = document.querySelector('.form');
  const list = document.querySelector('.list');

  let isMenuOpen = false;
  let data = [];

  const copyTextToClipboard = (text) => {
    const button = document.getElementsByClassName(text)[0];
    navigator.clipboard.writeText(text);
    console.log(button);
    button.style.backgroundColor = "hsl(257, 27%, 26%)"
    button.innerHTML = "Copied!"
    setTimeout(() => {
      button.style.backgroundColor = "hsl(180, 66%, 49%)"
      button.innerHTML = "Copy"
    }, 1000)
  }

  // Side Lifecycle

  window.onload = () => {
    let existingData = [];
    existingData = JSON.parse(localStorage.getItem("data")) || [];


    data = [];

    existingData.forEach(data => {

      let shortUrl = data.shortUrl;
      console.log(list);
      list.insertAdjacentHTML('beforeend', `<div class="bg-white mb-5 rounded-sm justify-between flex flex-col md:flex-row md:items-center py-3 px-3">
        <p style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" class="w-full md:hidden block">${data.longUrl}</p>
        <p class="md:block hidden">${data.longUrl}</p>
        <div class="block md-hidden h-0.5 w-full bg-gray-200 md:hidden block my-2"></div>
        <div class="flex flex-col md:flex-row gap-1 md:items-center items-left">
        <a href="${shortUrl}" target="_blank" style="color: hsl(180, 66%, 49%);">${shortUrl}</a>
        <button onmousedown="copyTextToClipboard('${shortUrl}')" style="background-color: hsl(180, 66%, 49%);"
            class="rounded h-10 md:w-28 w-full text-sm font-base font-semibold text-white ${shortUrl}">Copy</button>
        </div>
      </div>
    </div>`)

    })
  }

  const getCircularReplacer = () => {
    const seen = new WeakSet();
    return (key, value) => {
      if (typeof value === "object" && value !== null) {
        if (seen.has(value)) {
          return;
        }
        seen.add(value);
      }
      return value;
    };
  };



  function appendObjTo(thatArray, newObj) {
    const frozenObj = Object.freeze(newObj);
    return Object.freeze(thatArray.concat(frozenObj));
  }

  function shortenUrl(formData) {
    let longUrl = formData.longUrl;
    let shortUrl;
    let code;
    fetch(`https://api.shrtco.de/v2/shorten?url=${longUrl}`).then(JSON => JSON.json()).then(info => {
      shortUrl = info.result.full_short_link;
      code = info.result.code;
      console.log(list);
      list.insertAdjacentHTML('beforeend', `<div class="bg-white mb-5 rounded-sm justify-between flex flex-col md:flex-row md:items-center py-3 px-3">
        <p style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" class="w-full md:hidden block">${longUrl}</p>
        <p class="md:block hidden">${longUrl}</p>
        <div class="block md-hidden h-0.5 w-full bg-gray-200 md:hidden block my-2"></div>
        <div class="flex flex-col md:flex-row gap-1 md:items-center items-left">
        <a href="${shortUrl}" target="_blank" style="color: hsl(180, 66%, 49%);">${shortUrl}</a>
        <button onmousedown="copyTextToClipboard('${shortUrl}')" style="background-color: hsl(180, 66%, 49%);"
            class="rounded h-10 md:w-28 w-full text-sm font-base font-semibold text-white ${shortUrl}">Copy</button>
        </div>
      </div>
    </div>`)
      const object = {
        longUrl: longUrl,
        shortUrl: shortUrl,
        code: code
      }
      console.log(data);
      if (data instanceof Array) {
        console.log("is array");
        data = [...data, object]


        console.log(data);
        localStorage.setItem("data", JSON.stringify(data))
      } else {
        console.log("isn't array");
      }
      console.log(shortUrl);
    }).catch(err => {
      console.log(err);
    })
  }


  // Event Listeners
  btn.addEventListener("click", () => {
    menu.classList.toggle("hidden");
    isMenuOpen = !isMenuOpen;
    if (isMenuOpen) {
      menu_icon.classList.replace('block', 'hidden')
      close_icon.classList.replace('hidden', 'block')
    } else {
      close_icon.classList.replace('block', 'hidden')
      menu_icon.classList.replace('hidden', 'block')
    }
  })

  form.addEventListener("submit", () => {
    event.preventDefault();
    //Check if form is empty
    if (input.value) {
      shortenUrl({ longUrl: input.value })
    } else {
      input.classList.toggle("border-2")
      input.classList.toggle("border-red-500")
    }
  })

</script>

</html>